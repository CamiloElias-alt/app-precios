document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("form-title"),t=document.getElementById("nameInput"),n=document.getElementById("emailInput"),a=document.getElementById("passwordInput"),r=document.getElementById("auth-button"),i=document.getElementById("auth-link"),o=document.getElementById("auth-link-container"),s=!1;function l(){s?(e.textContent="✍️ Registrarse",t.style.display="block",t.required=!0,r.textContent="Registrarme",o.innerHTML='\xbfYa tienes cuenta? <a href="#" id="auth-link">Inicia Sesi\xf3n</a>'):(e.textContent="\uD83D\uDD10 Iniciar Sesi\xf3n",t.style.display="none",t.required=!1,r.textContent="Ingresar",o.innerHTML='\xbfNo tienes cuenta? <a href="#" id="auth-link">Reg\xedstrate</a>'),(i=document.getElementById("auth-link")).addEventListener("click",d)}function d(e){e.preventDefault(),s=!s,l()}r.addEventListener("click",()=>{let e=t.value.trim(),r=n.value.trim(),i=a.value;if(s){if(!e||!r||!i){alert("Por favor, completa todos los campos para registrarte.");return}firebase.auth().createUserWithEmailAndPassword(r,i).then(t=>t.user.updateProfile({displayName:e})).then(()=>{window.location.href="app-precios.html"}).catch(e=>{alert(`Error al registrar: ${e.message}`)})}else{if(!r||!i){alert("Por favor, ingresa tu correo y contrase\xf1a.");return}firebase.auth().signInWithEmailAndPassword(r,i).then(()=>{window.location.href="app-precios.html"}).catch(e=>{"auth/user-not-found"===e.code||"auth/wrong-password"===e.code?alert("Usuario o contrase\xf1a incorrectos. Por favor, verifica tus datos o reg\xedstrate."):alert(`Error al iniciar sesi\xf3n: ${e.message}`)})}}),l()});